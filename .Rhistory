text = '测试数据',
subtext = 'From d3.js',
x = 'right',
y = 'bottom'
),
tooltip = list(
trigger = 'item',
formatter = JS('function(params) {
if (params.indicator2) { // is edge
return params.value.weight;
} else {// is node
return params.name
}
}')
),
toolbox = list(
show = TRUE,
feature = list(
restore = list(show = TRUE),
magicType = list(show = TRUE, type = c('force', 'chord')),
saveAsImage = list(show = TRUE)
)
),
legend = list(
x = 'left',
data = c('group1', 'group2', 'group3', 'group4')
),
series = list(
list(
type = 'chord',
sort = 'ascending',
sortSub = 'descending',
showScale = TRUE,
showScaleText = TRUE,
data = list(
list(name = 'group1'),
list(name = 'group2'),
list(name = 'group3'),
list(name = 'group4')
),
itemStyle = list(
normal = list(
label = list(show = FALSE)
)
),
matrix = rbind(
c(11975,  5871, 8916, 2868),
c( 1951, 10048, 2060, 6171),
c( 8010, 16145, 8090, 8045),
c( 1013,   990,  940, 6907)
)
)
)
)
echart(chordEx1)
rm(list=ls(all=T))
source('src/config/include.R',encoding='utf-8')
chordEx1 = list(
title = list(
text = '测试数据',
subtext = 'From d3.js',
x = 'right',
y = 'bottom'
),
tooltip = list(
trigger = 'item',
formatter = JS('function(params) {
if (params.indicator2) { // is edge
return params.value.weight;
} else {// is node
return params.name
}
}')
),
toolbox = list(
show = TRUE,
feature = list(
restore = list(show = TRUE),
magicType = list(show = TRUE, type = c('force', 'chord')),
saveAsImage = list(show = TRUE)
)
),
legend = list(
x = 'left',
data = c('group1', 'group2', 'group3', 'group4')
),
series = list(
list(
type = 'chord',
sort = 'ascending',
sortSub = 'descending',
showScale = TRUE,
showScaleText = TRUE,
data = list(
list(name = 'group1'),
list(name = 'group2'),
list(name = 'group3'),
list(name = 'group4')
),
itemStyle = list(
normal = list(
label = list(show = FALSE)
)
),
matrix = rbind(
c(11975,  5871, 8916, 2868),
c( 1951, 10048, 2060, 6171),
c( 8010, 16145, 8090, 8045),
c( 1013,   990,  940, 6907)
)
)
)
)
echart(chordEx1)
formatter = JS('function(params) {
if (params.indicator2) { // is edge
return params.value.weight;
} else {// is node
return params.name
}
}')
)
formatter = JS('function(params) {
if (params.indicator2) { // is edge
return params.value.weight;
} else {// is node
return params.name
}
}')
formatter
formatter
?gsub
gsub('\n','',formatter)
formatter gsub('\n','',formatter)
formatter =  gsub('\n','',formatter)
chordEx1 = list(
title = list(
text = '测试数据',
subtext = 'From d3.js',
x = 'right',
y = 'bottom'
),
tooltip = list(
trigger = 'item',
formatter = formatter
),
toolbox = list(
show = TRUE,
feature = list(
restore = list(show = TRUE),
magicType = list(show = TRUE, type = c('force', 'chord')),
saveAsImage = list(show = TRUE)
)
),
legend = list(
x = 'left',
data = c('group1', 'group2', 'group3', 'group4')
),
series = list(
list(
type = 'chord',
sort = 'ascending',
sortSub = 'descending',
showScale = TRUE,
showScaleText = TRUE,
data = list(
list(name = 'group1'),
list(name = 'group2'),
list(name = 'group3'),
list(name = 'group4')
),
itemStyle = list(
normal = list(
label = list(show = FALSE)
)
),
matrix = rbind(
c(11975,  5871, 8916, 2868),
c( 1951, 10048, 2060, 6171),
c( 8010, 16145, 8090, 8045),
c( 1013,   990,  940, 6907)
)
)
)
)
echart(chordEx1)
option = list(
backgroundColor= '#eee',
animation= F,
legend= list(
bottom= 10,
left= 'center',
data= c('Dow-Jones index', 'MA5')
),
tooltip= list(
trigger= 'axis',
axisPointer= list(
type= 'cross'
),
backgroundColor= 'rgba(245, 245, 245, 0.8)',
borderWidth= 1,
borderColor= '#ccc',
padding= 10,
textStyle= list(
color= '#000'
),
extraCssText= 'width= 170px'
),
axisPointer= list(
link= list(xAxisIndex= 'all'),
label= list(
backgroundColor= '#777'
)
),
toolbox= list(
feature= list(
dataZoom= list(
yAxisIndex= F
),
brush= list(
type= c('lineX', 'clear')
)
)
),
brush= list(
xAxisIndex= 'all',
brushLink= 'all',
outOfBrush= list(
colorAlpha= 0.1
)
),
grid= list(
list(
left= '10%',
right= '8%',
height= '50%'
),
list(
left= '10%',
right= '8%',
top= '63%',
height= '16%'
)
),
xAxis= list(
list(
type= 'category',
data= dates,#data.categoryData,
scale= T,
boundaryGap = F,
axisLine= list(onZero= F),
splitLine= list(show= F),
splitNumber= 20,
min= 'dataMin',
max= 'dataMax',
axisPointer= list(
z= 100
)
),
list(
type= 'category',
gridIndex= 1,
data= dates,#data.categoryData,
scale= T,
boundaryGap = F,
axisLine= list(onZero= F),
axisTick= list(show= F),
splitLine= list(show= F),
axisLabel= list(show= F),
splitNumber= 20,
min= 'dataMin',
max= 'dataMax',
axisPointer= list(
label= list(
)
)
)
),
yAxis= list(
list(
scale= T,
splitArea= list(
show= T
)
),
list(
scale= T,
gridIndex= 1,
splitNumber= 2,
axisLabel= list(show= F),
axisLine= list(show= F),
axisTick= list(show= F),
splitLine= list(show= F)
)
),
dataZoom= list(
list(
type= 'inside',
xAxisIndex= c(0, 1),
start= 98,
end= 100
),
list(
show= T,
xAxisIndex= c(0, 1),
type= 'slider',
top= '85%',
start= 98,
end= 100
)
),
series= list(
list(
name= 'index',
type= 'candlestick',
data= xx,
itemStyle= list(
normal= list(
borderColor= null,
borderColor0= null
)
),
tooltip= list(
)
),
list(
name= 'MA5',
type= 'line',
data= ma,
smooth= T,
lineStyle= list(
normal= list(opacity= 0.5)
)
),
list(
name= 'Volumn',
type= 'bar',
xAxisIndex= 1,
yAxisIndex= 1,
data= ma
)
)
)
echart(option)
stock$sma10 = SMA(stock$close,10)
stock = na.omit(stock)
dates = as.character(stock$date)
data = as.data.frame(OHLC(stock))
rownames(data) = NULL
colnames(data) = NULL
data = as.matrix(data)
xx = apply(data,1,as.list)
ma = as.numeric(stock$sma10)
option = list(
backgroundColor= '#eee',
animation= F,
legend= list(
bottom= 10,
left= 'center',
data= c('Dow-Jones index', 'MA5')
),
tooltip= list(
trigger= 'axis',
axisPointer= list(
type= 'cross'
),
backgroundColor= 'rgba(245, 245, 245, 0.8)',
borderWidth= 1,
borderColor= '#ccc',
padding= 10,
textStyle= list(
color= '#000'
),
extraCssText= 'width= 170px'
),
axisPointer= list(
link= list(xAxisIndex= 'all'),
label= list(
backgroundColor= '#777'
)
),
toolbox= list(
feature= list(
dataZoom= list(
yAxisIndex= F
),
brush= list(
type= c('lineX', 'clear')
)
)
),
brush= list(
xAxisIndex= 'all',
brushLink= 'all',
outOfBrush= list(
colorAlpha= 0.1
)
),
grid= list(
list(
left= '10%',
right= '8%',
height= '50%'
),
list(
left= '10%',
right= '8%',
top= '63%',
height= '16%'
)
),
xAxis= list(
list(
type= 'category',
data= dates,#data.categoryData,
scale= T,
boundaryGap = F,
axisLine= list(onZero= F),
splitLine= list(show= F),
splitNumber= 20,
min= 'dataMin',
max= 'dataMax',
axisPointer= list(
z= 100
)
),
list(
type= 'category',
gridIndex= 1,
data= dates,#data.categoryData,
scale= T,
boundaryGap = F,
axisLine= list(onZero= F),
axisTick= list(show= F),
splitLine= list(show= F),
axisLabel= list(show= F),
splitNumber= 20,
min= 'dataMin',
max= 'dataMax',
axisPointer= list(
label= list(
)
)
)
),
yAxis= list(
list(
scale= T,
splitArea= list(
show= T
)
),
list(
scale= T,
gridIndex= 1,
splitNumber= 2,
axisLabel= list(show= F),
axisLine= list(show= F),
axisTick= list(show= F),
splitLine= list(show= F)
)
),
dataZoom= list(
list(
type= 'inside',
xAxisIndex= c(0, 1),
start= 98,
end= 100
),
list(
show= T,
xAxisIndex= c(0, 1),
type= 'slider',
top= '85%',
start= 98,
end= 100
)
),
series= list(
list(
name= 'index',
type= 'candlestick',
data= xx,
itemStyle= list(
normal= list(
borderColor= null,
borderColor0= null
)
),
tooltip= list(
)
),
list(
name= 'MA5',
type= 'line',
data= ma,
smooth= T,
lineStyle= list(
normal= list(opacity= 0.5)
)
),
list(
name= 'Volumn',
type= 'bar',
xAxisIndex= 1,
yAxisIndex= 1,
data= ma
)
)
)
echart(option)
ma
